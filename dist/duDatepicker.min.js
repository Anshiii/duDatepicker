!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).duDatepicker=t()}(this,function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var e,a,r,w={appendTo:function(e,t,a){Array.isArray(e)?e.forEach(function(e){0===a?t.insertBefore(e,t.childNodes[a]||null):t.appendChild(e)}):0===a?t.insertBefore(e,t.childNodes[a]||null):t.appendChild(e)},addEvent:function(e,t,a){function n(e,t,a){e.addEventListener(t,a,!1)}Array.isArray(e)?e.forEach(function(e){n(e,t,a)}):n(e,t,a)},removeEvent:function(e,t,a){function n(e,t,a){e.removeEventListener(t,a,!1)}Array.isArray(e)?e.forEach(function(e){n(e,t,a)}):n(e,t,a)},empty:function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},createElem:function(e,t,a,n){e=document.createElement(e);return void 0!==a&&(e[n?"innerHTML":"innerText"]=a),void 0!==t&&w.setAttributes(e,t),e},setAttributes:function(e,t){for(var a in t)e.setAttribute(a,t[a])},setStyles:function(e,t){for(var a in t)e.style[a]=t[a]},getDaysCount:function(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()},dateDiff:function(e,t){return Math.round((t-e)/864e5)},screenDim:function(){var e=document.documentElement;return{height:Math.max(e.offsetHeight,e.clientHeight),width:Math.max(e.offsetWidth,e.clientWidth)}},calcOffset:function(e){var t=document.documentElement||document.body,a=e.getBoundingClientRect(),n={top:a.top+t.scrollTop,left:a.left+t.scrollLeft},a=e.offsetHeight,t=e.offsetWidth,e=w.screenDim();return{top:n.top+a,left:n.left,right:e.width-(n.left+t),bottom:e.height-n.top}},extend:function(){var a={},n=!1,e=0,t=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(n=arguments[0],e++);for(;e<t;e++)!function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n&&"[object Object]"===Object.prototype.toString.call(e[t])?a[t]=w.extend(!0,a[t],e[t]):a[t]=e[t])}(arguments[e]);return a},formatDate:function(e,t){var a=new Date(e),n=a.getDate(),r=a.getMonth(),i=a.getFullYear(),o=this.config.i18n,s=r+1;return t.replace(/(yyyy|yy|mmmm|mmm|mm|m|DD|D|dd|d)/g,function(e){switch(e){case"d":return n;case"dd":return("00"+n).slice(-2);case"D":return o.shortDays[a.getDay()];case"DD":return o.days[a.getDay()];case"m":return s;case"mm":return("00"+s).slice(-2);case"mmm":return o.shortMonths[r];case"mmmm":return o.months[r];case"yy":return i.toString().substr(2,2);case"yyyy":return i}})},parseDate:function(t,e){var a,n,r=void 0===e?this.config.format:e,i=(r.match(/d/g)||[]).length,o=(r.match(/m/g)||[]).length,s=(r.match(/y/g)||[]).length,l=4===o,d=1===o,c=1===i,_=t.length,u=r.indexOf("m"),p=r.indexOf("d"),m=r.indexOf("y"),f="",g="",h="",e=-1;return""===t?{m:null,d:null,y:null,date:new Date("")}:(l?(e=this.config.i18n.months.findIndex(function(e){return 0<=t.indexOf(e)}),f=this.config.i18n.months[e],p=(r=r.replace("mmmm",f)).indexOf("d"),m=m<u?r.indexOf("y"):r.indexOf("y",r.indexOf(f)+f.length)):f=!c&&!d||c&&!d&&u<p?t.substr(u,o):(o=r.lastIndexOf("m"),a=r.substring(u-1,u),n=r.substring(o+1,o+2),o===r.length-1?t.substring(t.indexOf(a,u-1)+1,_):0===u?t.substring(0,t.indexOf(n,u)):t.substring(t.indexOf(a,u-1)+1,t.indexOf(n,u+1))),{m:f,d:g=!c&&!d||!c&&d&&p<u?t.substr(p,i):(i=r.lastIndexOf("d"),a=r.substring(p-1,p),n=r.substring(i+1,i+2),i===r.length-1?t.substring(t.indexOf(a,p-1)+1,_):0===p?t.substring(0,t.indexOf(n,p)):t.substring(t.indexOf(a,p-1)+1,t.indexOf(n,p+1))),y:h=!d&&!c||d&&c&&m<u&&m<p||!d&&c&&m<p||d&&!c&&m<u?t.substr(m,s):(a=r.substring(m-1,m),t.substr(t.indexOf(a,m-1)+1,s)),date:new Date(h,isNaN(parseInt(f))?e:f-1,g)})},triggerChange:function(e,t){e.dispatchEvent(new Event("change")),e.dispatchEvent(new Event("onchange")),e.dispatchEvent(new function(e){var t=document.createEvent("CustomEvent");return t.initCustomEvent("datechanged",!1,!1),t.data=e,t}(t))},daysOfWeekDOM:function(){for(var e=this.config,t=e.i18n,a=[],n=0,r=e.firstDay||t.firstDay;n<t.shorterDays.length;n++,r++)a.push(t.shorterDays[r%7]);return"<span>".concat(a.join("</span><span>"),"</span>")},jsonToDate:function(e){return new Date(e.year,e.month,e.date)},dateToJson:function(e){return e?{year:e.getFullYear(),month:e.getMonth(),date:e.getDate()}:null},isElement:function(e){return e instanceof Element}},_={btnOk:"OK",btnCancel:"CANCEL",btnClear:"CLEAR"},i=function e(t,a,n,r,i,o,s){c(this,e),this.months=t,this.shortMonths=a||this.months.map(function(e){return e.substr(0,3)}),this.days=n,this.shortDays=r||this.days.map(function(e){return e.substr(0,3)}),this.shorterDays=i||this.days.map(function(e){return e.substr(0,2)}),this.firstDay=o,this.dict=w.extend(_,s)},i={Locale:i,en:new i("January_February_March_April_May_June_July_August_September_October_November_December".split("_"),null,"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),null,null,7),ru:new i("январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_"),"янв._февр._мар._апр._мая_июня_июля_авг._сент._окт._нояб._дек.".split("_"),"воскресенье_понедельник_вторник_среда_четверг_пятница_суббота".split("_"),"вс_пн_вт_ср_чт_пт_сб".split("_"),"вс_пн_вт_ср_чт_пт_сб".split("_"),1,{btnCancel:"Отменить",btnClear:"Очистить"}),es:new i("enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),null,"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),"dom._lun._mar._mié._jue._vie._sáb.".split("_"),null,1,{btnCancel:"Cancelar",btnClear:"Vaciar"}),tr:new i("Ocak_Şubat_Mart_Nisan_Mayıs_Haziran_Temmuz_Ağustos_Eylül_Ekim_Kasım_Aralık".split("_"),null,"Pazar_Pazartesi_Salı_Çarşamba_Perşembe_Cuma_Cumartesi".split("_"),"Paz_Pts_Sal_Çar_Per_Cum_Cts".split("_"),"Pz_Pt_Sa_Ça_Pe_Cu_Ct".split("_"),1),fa:new i("ژانویه_فوریه_مارس_آوریل_مه_ژوئن_ژوئیه_اوت_سپتامبر_اکتبر_نوامبر_دسامبر".split("_"),"ژانویه_فوریه_مارس_آوریل_مه_ژوئن_ژوئیه_اوت_سپتامبر_اکتبر_نوامبر_دسامبر".split("_"),"یک‌شنبه_دوشنبه_سه‌شنبه_چهارشنبه_پنج‌شنبه_جمعه_شنبه".split("_"),"یک‌شنبه_دوشنبه_سه‌شنبه_چهارشنبه_پنج‌شنبه_جمعه_شنبه".split("_"),"ی_د_س_چ_پ_ج_ش".split("_"),1),fr:new i("janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),"dim._lun._mar._mer._jeu._ven._sam.".split("_"),"di_lu_ma_me_je_ve_sa".split("_"),1,{btnCancel:"Abandonner",btnClear:"Effacer"}),de:new i("Januar_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),"Jan._Feb._März_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),1,{btnCancel:"Stornieren",btnClear:"Löschen"}),ja:new i("一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),"日曜日_月曜日_火曜日_水曜日_木曜日_金曜日_土曜日".split("_"),"日曜_月曜_火曜_水曜_木曜_金曜_土曜".split("_"),"日_月_火_水_木_金_土".split("_"),7),pt:new i("janeiro_fevereiro_março_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),null,"Domingo_Segunda-feira_Terça-feira_Quarta-feira_Quinta-feira_Sexta-feira_Sábado".split("_"),"Dom_Seg_Ter_Qua_Qui_Sex_Sáb".split("_"),"Do_2ª_3ª_4ª_5ª_6ª_Sá".split("_"),1,{btnCancel:"Cancelar",btnClear:"Clarear"}),vi:new i("tháng 1_tháng 2_tháng 3_tháng 4_tháng 5_tháng 6_tháng 7_tháng 8_tháng 9_tháng 10_tháng 11_tháng 12".split("_"),"Thg 01_Thg 02_Thg 03_Thg 04_Thg 05_Thg 06_Thg 07_Thg 08_Thg 09_Thg 10_Thg 11_Thg 12".split("_"),"chủ nhật_thứ hai_thứ ba_thứ tư_thứ năm_thứ sáu_thứ bảy".split("_"),"CN_T2_T3_T4_T5_T6_T7".split("_"),"CN_T2_T3_T4_T5_T6_T7".split("_"),1),zh:new i("一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),"周日_周一_周二_周三_周四_周五_周六".split("_"),"日_一_二_三_四_五_六".split("_"),1)},u=[9,112,113,114,115,116,117,118,119,120,121,122,123],s="_duDatepicker",l=".duDatepicker-input",p={value:null,format:"mm/dd/yyyy",outFormat:null,theme:"blue",auto:!1,inline:!1,clearBtn:!1,cancelBtn:!1,overlayClose:!0,disabledDates:[],disabledDays:[],range:!1,rangeDelim:"-",fromTarget:null,toTarget:null,events:{dateChanged:null,onRangeFormat:null,ready:null,shown:null,hidden:null},i18n:i.en,firstDay:null,root:"body"},d=function(){function d(e,t){c(this,d);var a=this,n=t.i18n;"string"==typeof n&&(t.i18n=m.i18n[n]),this.config=w.extend(d.default_configs||p,t);var r=this.config.root;"string"==typeof r?this.config.root=document.querySelector(r):w.isElement(r)||delete this.config.root,this.animating=!1,this.visible=!1,this.input=e,this.input.readOnly=!0,this.fromEl=document.querySelector(this.config.fromTarget),this.toEl=document.querySelector(this.config.toTarget),this.input.hidden=this.config.range&&(this.fromEl||this.toEl),this.viewMode="calendar",this.dict=w.extend(_,this.config.i18n.dict),this.datepicker={container:w.createElem("div",{class:"dcalendarpicker"}),wrapper:w.createElem("div",{class:"dudp__wrapper",tabindex:0}),header:{wrapper:w.createElem("section",{class:"dudp__calendar-header"}),selectedYear:w.createElem("span",{class:"dudp__sel-year"}),selectedDate:w.createElem("span",{class:"dcp_sel-date"})},calendarHolder:{wrapper:w.createElem("section",{class:"dudp__cal-container"}),btnPrev:w.createElem("span",{class:"dudp__btn-cal-prev",role:"button"},"&lsaquo;",!0),btnNext:w.createElem("span",{class:"dudp__btn-cal-next",role:"button"},"&rsaquo;",!0),calendarViews:{wrapper:w.createElem("div",{class:"dudp__calendar-views"}),calendars:[]},yearsView:w.createElem("div",{class:"dudp__years-view dp__hidden"}),monthsView:w.createElem("div",{class:"dudp__months-view dp__hidden"}),buttons:{wrapper:w.createElem("div",{class:"dudp__buttons"}),btnClear:w.createElem("span",{class:"dudp__button clear",role:"button"},a.dict.btnClear),btnCancel:w.createElem("span",{class:"dudp__button cancel",role:"button"},a.dict.btnCancel),btnOk:w.createElem("span",{class:"dudp__button ok",role:"button"},a.dict.btnOk)}}},a.config.value&&(a.input.value=a.config.value,a.input.setAttribute("value",a.config.value)),this.minDate=a.input.dataset.mindate||a.config.minDate,this.maxDate=a.input.dataset.maxdate||a.config.maxDate;var i=new Date;if(a.config.range){var o=a.input.value,n=o.split(a.config.rangeDelim);if(""!==o&&n.length<2)throw new Error("duDatePicker: Invalid date range value");t=""===o?null:w.parseDate.call(a,n[0]).date,r=""===o?null:w.parseDate.call(a,n[1]).date;this.dateFrom=t,this.dateTo=r,this.rangeFrom=null,this.rangeTo=null,this.viewMonth=(t||i).getMonth(),this.viewYear=(t||i).getFullYear(),o&&(e=a.config.events&&a.config.events.onRangeFormat?a.formatRange(t,r):o,n=w.formatDate.call(a,t,a.config.format),o=w.formatDate.call(a,t,a.config.outFormat||a.config.format),t=w.formatDate.call(a,r,a.config.format),r=w.formatDate.call(a,r,a.config.outFormat||a.config.format),a.input.value=e,w.setAttributes(a.input,{value:e,"data-range-from":o,"data-range-to":r}),a.fromEl&&(a.fromEl.value=n,w.setAttributes(a.fromEl,{value:n,"data-value":o})),a.toEl&&(a.toEl.value=t,w.setAttributes(a.toEl,{value:n,"data-value":r})))}else this.date=""===a.input.value?i:w.parseDate.call(a,a.input.value).date,this.selected=w.dateToJson(a.date),this.viewMonth=a.selected.month,this.viewYear=a.selected.year;function s(){a.showInFromEl=a.config.inline&&a.fromEl&&this===a.fromEl,a.showInToEl=a.config.inline&&a.toEl&&this===a.toEl,a.show()}function l(e){return 13===e.keyCode&&(a.showInFromEl=a.config.inline&&a.fromEl&&this===a.fromEl,a.showInToEl=a.config.inline&&a.toEl&&this===a.toEl,a.show()),!(u.indexOf(e.which)<0)}this._unbindInput=function(){a.input.readOnly=!1,a.input.removeEventListener("click",s),a.input.removeEventListener("keydown",l),a.fromEl&&(a.fromEl.readOnly=!1,a.fromEl.removeEventListener("click",s),a.fromEl.removeEventListener("keydown",l)),a.toEl&&(a.toEl.readOnly=!1,a.toEl.removeEventListener("click",s),a.toEl.removeEventListener("keydown",l))},w.addEvent(a.input,"click",s),w.addEvent(a.input,"keydown",l),a.fromEl&&(a.fromEl.readOnly=!0,w.addEvent(a.fromEl,"click",s),w.addEvent(a.fromEl,"keydown",l)),a.toEl&&(a.toEl.readOnly=!0,w.addEvent(a.toEl,"click",s),w.addEvent(a.toEl,"keydown",l)),this._init(),this._setSelection()}var e,t,a;return e=d,(t=[{key:"_init",value:function(){var a=this,e=a.datepicker,t=e.header,n=e.calendarHolder,r=n.buttons,i=a.selected||new Date;a.config.inline||(w.appendTo([t.selectedYear,t.selectedDate],t.wrapper),w.appendTo(t.wrapper,e.wrapper),w.addEvent(t.selectedYear,"click",function(){"years"!==a.viewMode&&a._switchView("years")}),w.addEvent(t.selectedDate,"click",function(){var e=new Date,t=a.config.range?e.getMonth():a.selected.month,e=a.config.range?e.getFullYear():a.selected.year;a.viewMonth===t&&a.viewYear===e&&"calendar"===a.viewMode||(a.viewMonth=t,a.viewYear=e,a._setupCalendar(),a._switchView("calendar"))}));for(var o=0,s=1;s<4;s++){for(var l=w.createElem("div",{class:"dudp__month-row"}),d=0;d<4;d++){var c=w.createElem("span",{class:"dudp__month"});o===i.month&&c.classList.add("selected"),c.innerText=a.config.i18n.shortMonths[o],c.dataset.month=o,w.appendTo(c,l),w.addEvent(c,"click",function(e){var t=this.dataset.month;a.viewMonth=t,a._setupCalendar(),a._switchView("calendar")}),o++}w.appendTo(l,n.monthsView)}w.appendTo(a._getYears(),n.yearsView),a.config.clearBtn&&w.appendTo(r.btnClear,r.wrapper),a.config.cancelBtn&&w.appendTo(r.btnCancel,r.wrapper),a.config.auto&&!a.config.range||w.appendTo(r.btnOk,r.wrapper),w.appendTo([n.btnPrev,n.btnNext,n.calendarViews.wrapper,n.monthsView,n.yearsView,r.wrapper],n.wrapper),w.appendTo(n.wrapper,e.wrapper),w.appendTo(e.wrapper,e.container),w.appendTo(e.container,a.config.root),a.config.inline&&e.container.setAttribute("inline",!0),e.wrapper.dataset.theme=a.input.dataset.theme||a.config.theme,w.addEvent(e.wrapper,"keydown",function(e){27===e.keyCode?a.hide():37===e.keyCode?a._move("prev"):39===e.keyCode&&a._move("next")}),a.config.inline&&w.addEvent(e.wrapper,"blur",function(){a.hide()}),w.addEvent(n.btnPrev,"click",function(){a._move("prev")}),w.addEvent(n.btnNext,"click",function(){a._move("next")}),w.addEvent(n.calendarViews.wrapper,"click",function(e){e.target.classList.contains("cal-year")?a._switchView("years"):e.target.classList.contains("cal-month")&&a._switchView("months")}),a.config.clearBtn&&w.addEvent(r.btnClear,"click",function(){a.setValue(""),a.hide()}),a.config.overlayClose&&(w.addEvent(e.container,"click",function(){a.hide()}),w.addEvent(e.wrapper,"click",function(e){e.stopPropagation()})),a.config.cancelBtn&&w.addEvent(r.btnCancel,"click",function(){a.hide()}),w.addEvent(r.btnOk,"click",function(){if(a.config.range){if(!a.rangeFrom||!a.rangeTo)return;var e=w.jsonToDate(a.rangeFrom),t=w.jsonToDate(a.rangeTo);if(a._dateDisabled(e)||a._dateDisabled(t))return;a.dateFrom=e,a.dateTo=t,a.setValue([w.formatDate.call(a,e,a.config.format),w.formatDate.call(a,t,a.config.format)].join(a.config.rangeDelim))}else{t=w.jsonToDate(a.selected);if(a._dateDisabled(t))return;a.date=t,a.setValue(a.date)}a.hide()}),a.config.events&&a.config.events.ready&&a.config.events.ready.call(a,a)}},{key:"_inRange",value:function(e){if(!this.config.range)return!1;var t=this.rangeFrom?w.jsonToDate(this.rangeFrom):null,a=this.rangeTo?w.jsonToDate(this.rangeTo):null;return t&&t<e&&a&&e<a}},{key:"_dateDisabled",value:function(t){var a=this,e=null,n=null,r=new Date,i=new Date(r.getFullYear(),r.getMonth(),r.getDate()),o=a.config.disabledDates,r=a.config.disabledDays,o=0<o.filter(function(e){return 0<=e.indexOf("-")?t>=w.parseDate.call(a,e.split("-")[0]).date&&t<=w.parseDate.call(a,e.split("-")[1]).date:w.parseDate.call(a,e).date.getTime()===t.getTime()}).length,r=0<=r.indexOf(a.config.i18n.days[t.getDay()])||0<=r.indexOf(a.config.i18n.shortDays[t.getDay()])||0<=r.indexOf(a.config.i18n.shorterDays[t.getDay()]);return a.minDate&&(e="today"===a.minDate?i:new Date(a.minDate)),a.maxDate&&(n="today"===a.maxDate?i:new Date(a.maxDate)),e&&t<e||n&&n<t||o||r}},{key:"_getDates",value:function(r,i){for(var d=this,a=1,e=new Date,o=new Date(e.getFullYear(),e.getMonth(),e.getDate()),s=d.config.range?null:w.jsonToDate(d.selected),l=d.rangeFrom?w.jsonToDate(d.rangeFrom):null,c=d.rangeTo?w.jsonToDate(d.rangeTo):null,n=new Date(r,i,a),t=w.getDaysCount(n),_=1,u=[],p=d.config.firstDay||d.config.i18n.firstDay,m=(p+6)%7,f=1;f<=6;f++){for(var g=[],h=0,v=p;h<7;h++,v++)g.push(w.createElem("span",{class:"dudp__date","data-dow":v%7}));for(;a<=t;)if("break"===function(){n.setDate(a);var t=n.getDay(),e=g.find(function(e){return parseInt(e.dataset.dow)===t});return e.dataset.date=a,e.dataset.month=i,e.dataset.year=r,n.getTime()===o.getTime()&&e.classList.add("current"),d._dateDisabled(n)&&e.classList.add("disabled"),d._inRange(n)&&e.classList.add("in-range"),d.config.range||n.getTime()!==s.getTime()||e.classList.add("selected"),d.config.range&&l&&n.getTime()===l.getTime()&&e.classList.add("range-from"),d.config.range&&c&&n.getTime()===c.getTime()&&e.classList.add("range-to"),1===f&&t===p%7?"break":t===m?(e.innerText=a++,"break"):void(e.innerText=a++)}())break;(1===f||4<f)&&(1===f?function(){for(var t=new Date(r,i-1,1),e=w.getDaysCount(t),a=1;a<=7;a++){t.setDate(e--);var n=g.find(function(e){return parseInt(e.dataset.dow)===t.getDay()});""===n.innerText&&(n.dataset.date=t.getDate(),n.dataset.month=t.getMonth(),n.dataset.year=t.getFullYear(),n.innerText=t.getDate(),n.classList.add("dudp__pm"),d._dateDisabled(t)&&n.classList.add("disabled"),d._inRange(t)&&n.classList.add("in-range"),t.getTime()===o.getTime()&&n.classList.add("current"),d.config.range||t.getTime()!==s.getTime()||n.classList.add("selected"),d.config.range&&l&&t.getTime()===l.getTime()&&n.classList.add("range-from"),d.config.range&&c&&t.getTime()===c.getTime()&&n.classList.add("range-to"))}}():4<f&&function(){for(var t=new Date(r,i+1,1),e=1;e<=7;e++){t.setDate(_);var a=g.find(function(e){return parseInt(e.dataset.dow)===t.getDay()});""===a.innerText&&(_++,a.dataset.date=t.getDate(),a.dataset.month=t.getMonth(),a.dataset.year=t.getFullYear(),a.innerText=t.getDate(),a.classList.add("dudp__nm"),d._dateDisabled(t)&&a.classList.add("disabled"),d._inRange(t)&&a.classList.add("in-range"),t.getTime()===o.getTime()&&a.classList.add("current"),d.config.range||t.getTime()!==s.getTime()||a.classList.add("selected"),d.config.range&&l&&t.getTime()===l.getTime()&&a.classList.add("range-from"),d.config.range&&c&&t.getTime()===c.getTime()&&a.classList.add("range-to"))}}()),u.push(g)}var y=[];return u.forEach(function(e){for(var t=w.createElem("div",{class:"dudp__cal-week"}),a=0;a<e.length;a++){var n=e[a];w.addEvent(n,"click",function(){var e,t,i=this.dataset.year,o=this.dataset.month,s=this.dataset.date,a=new Date(i,o,s),l=!1;d._dateDisabled(a)||(d.config.range?(e=d.rangeFrom?w.jsonToDate(d.rangeFrom):null,t=d.rangeTo?w.jsonToDate(d.rangeTo):null,!d.rangeFrom||d.rangeFrom&&a<e||d.rangeFrom&&d.rangeTo&&w.dateDiff(e,a)<=w.dateDiff(a,t)&&0!==w.dateDiff(e,a)||d.rangeFrom&&d.rangeTo&&t.getTime()===a.getTime()?(d.rangeFrom={year:i,month:o,date:s},l=!0):(!d.rangeTo||d.rangeTo&&t<a||d.rangeFrom&&d.rangeTo&&w.dateDiff(a,t)<w.dateDiff(e,a)&&0!==w.dateDiff(a,t)||d.rangeFrom&&d.rangeTo&&e.getTime()===a.getTime())&&(d.rangeTo={year:i,month:o,date:s},l=!1),d.datepicker.calendarHolder.calendarViews.wrapper.querySelectorAll(".dudp__date").forEach(function(e){var t=e.dataset.year,a=e.dataset.month,n=e.dataset.date,r=d._inRange(new Date(t,a,n));e.classList[i===t&&o===a&&s===n?"add":"remove"](l?"range-from":"range-to"),e.classList[r?"add":"remove"]("in-range")})):(d.datepicker.calendarHolder.calendarViews.wrapper.querySelectorAll(".dudp__date").forEach(function(e){var t=e.dataset.year,a=e.dataset.month,n=e.dataset.date;e.classList[i===t&&o===a&&s===n?"add":"remove"]("selected")}),this.classList.add("selected"),d.selected={year:i,month:o,date:s},d._setSelection(),d.config.auto&&(d.date=a,d.setValue(d.date),d.hide())),d.datepicker.calendarHolder.wrapper.querySelectorAll(".dudp__month").forEach(function(e){var t=e.dataset.month;e.classList[t===o?"add":"remove"]("selected")}))}),w.appendTo(n,t)}y.push(t)}),y}},{key:"_getYears",value:function(){for(var t=this,e=t.viewYear-50,a=t.viewYear+25,n=[],r=e;r<=a;r++){var i=w.createElem("span",{class:"dudp__year"});r===t.viewYear&&i.classList.add("selected"),i.innerText=r,i.dataset.year=r,w.addEvent(i,"click",function(){var e=parseInt(this.dataset.year);t.viewYear=e,t.config.range||(t.selected.year=e),t._setSelection(),t._setupCalendar(),t._switchView("calendar")}),n.push(i)}return n}},{key:"_setupCalendar",value:function(){var e=this,t=e.datepicker.calendarHolder.calendarViews,a=+e.viewYear,n=+e.viewMonth;t.calendars.length=0;var r={wrapper:w.createElem("div",{class:"dudp__calendar"}),header:w.createElem("div",{class:"dudp__cal-month-year"}),weekDays:w.createElem("div",{class:"dudp__weekdays"},w.daysOfWeekDOM.call(e),!0),datesHolder:w.createElem("div",{class:"dudp__dates-holder"})},i={wrapper:w.createElem("div",{class:"dudp__calendar"}),header:w.createElem("div",{class:"dudp__cal-month-year"}),weekDays:w.createElem("div",{class:"dudp__weekdays"},w.daysOfWeekDOM.call(e),!0),datesHolder:w.createElem("div",{class:"dudp__dates-holder"})},o={wrapper:w.createElem("div",{class:"dudp__calendar"}),header:w.createElem("div",{class:"dudp__cal-month-year"}),weekDays:w.createElem("div",{class:"dudp__weekdays"},w.daysOfWeekDOM.call(e),!0),datesHolder:w.createElem("div",{class:"dudp__dates-holder"})},s=0==n?11:n-1,l=11==n?0:1+n,d=0==n?a-1:a,c=11==n?1+a:a;w.appendTo([w.createElem("span",{class:"cal-month"},e.config.i18n.months[s]),w.createElem("span",{class:"cal-year"},d)],i.header),w.appendTo(e._getDates(d,s),i.datesHolder),w.appendTo([i.header,i.weekDays,i.datesHolder],i.wrapper),t.calendars.push(i),w.appendTo([w.createElem("span",{class:"cal-month"},e.config.i18n.months[n]),w.createElem("span",{class:"cal-year"},a)],r.header),w.appendTo(e._getDates(a,n),r.datesHolder),w.appendTo([r.header,r.weekDays,r.datesHolder],r.wrapper),t.calendars.push(r),w.appendTo([w.createElem("span",{class:"cal-month"},e.config.i18n.months[l]),w.createElem("span",{class:"cal-year"},c)],o.header),w.appendTo(e._getDates(c,l),o.datesHolder),w.appendTo([o.header,o.weekDays,o.datesHolder],o.wrapper),t.calendars.push(o),w.empty(t.wrapper),w.appendTo([i.wrapper,r.wrapper,o.wrapper],t.wrapper)}},{key:"_switchView",value:function(e){if("calendar"===e||"months"===e||"years"===e){var t=this,a=t.datepicker,n=a.calendarHolder.monthsView,r=a.calendarHolder.yearsView,i=a.calendarHolder.calendarViews.wrapper,o=a.calendarHolder.buttons.wrapper,s=t.viewMode,l="dp__hidden";switch(t.viewMode=e,t.viewMode){case"calendar":var d=i.querySelector(".dudp__calendar:nth-child(2)");i.classList.add("dp__animate-out"),i.classList.remove(l),"calendar"!==s&&d.classList.add("dp__zooming","dp__animate-zoom"),a.calendarHolder.btnPrev.classList.remove(l),a.calendarHolder.btnNext.classList.remove(l),o.classList.remove(l),setTimeout(function(){i.classList.remove("dp__animate-out"),"calendar"!==s&&d.classList.remove("dp__animate-zoom")},10),n.classList.add("dp__animate-out"),r.classList.add(l),setTimeout(function(){"calendar"!==s&&d.classList.remove("dp__zooming"),n.classList.add(l),n.classList.remove("dp__animate-out")},250);break;case"months":a.calendarHolder.btnPrev.classList.add(l),a.calendarHolder.btnNext.classList.add(l),o.classList.add(l),i.classList.add("dp__animate-out"),n.classList.add("dp__animate-out"),n.classList.remove(l),setTimeout(function(){n.classList.remove("dp__animate-out")},10),setTimeout(function(){i.classList.add(l),i.classList.remove("dp__animate-out")},250);break;case"years":w.empty(r),w.appendTo(t._getYears(),r);var c=r.querySelector(".dudp__year.selected");r.scrollTop=c.offsetTop-120,a.calendarHolder.btnPrev.classList.add(l),a.calendarHolder.btnNext.classList.add(l),o.classList.add(l),n.classList.add("dp__animate-out"),i.classList.add("dp__animate-out"),r.classList.remove(l),setTimeout(function(){i.classList.add(l),i.classList.remove("dp__animate-out"),n.classList.add(l),n.classList.remove("dp__animate-out")},250)}}}},{key:"_move",value:function(e){var t,a,n,r,i,o,s;"next"!==e&&"prev"!==e||((t=this).animating||(a=t.datepicker.calendarHolder.calendarViews,((n="next"===e)?11<t.viewMonth+1:t.viewMonth-1<0)&&(t.viewYear+=n?1:-1),t.viewMonth=n?11<t.viewMonth+1?0:t.viewMonth+1:t.viewMonth-1<0?11:t.viewMonth-1,t.animating=!0,r="dp__animate-"+(n?"left":"right"),a.wrapper.querySelectorAll(".dudp__calendar").forEach(function(e){e.classList.add(r)}),i=t.viewYear,o=n?t.viewMonth+1:t.viewMonth-1,(n?11<o:o<0)&&(o=n?0:11,i+=n?1:-1),e=t._getDates(i,o),s={wrapper:w.createElem("div",{class:"dudp__calendar"}),header:w.createElem("div",{class:"dudp__cal-month-year"}),weekDays:w.createElem("div",{class:"dudp__weekdays"},w.daysOfWeekDOM.call(t),!0),datesHolder:w.createElem("div",{class:"dudp__dates-holder"})},w.appendTo([w.createElem("span",{class:"cal-month"},t.config.i18n.months[o]),w.createElem("span",{class:"cal-year"},i)],s.header),w.appendTo(e,s.datesHolder),w.appendTo([s.header,s.weekDays,s.datesHolder],s.wrapper),setTimeout(function(){w.appendTo(s.wrapper,a.wrapper,n?void 0:0),a.wrapper.querySelectorAll(".dudp__calendar").forEach(function(e){e.classList.remove(r)}),a.wrapper.removeChild(a.calendars[n?0:2].wrapper),a.calendars[n?"shift":"pop"](),a.calendars[n?"push":"unshift"](s),t.animating=!1},250)))}},{key:"_resetSelection",value:function(){var e,n=this;n.config.range?(e=n.dateFrom||new Date,n.rangeFrom=w.dateToJson(n.dateFrom),n.rangeTo=w.dateToJson(n.dateTo),n.viewYear=e.getFullYear(),n.viewMonth=e.getMonth()):(n.selected=w.dateToJson(n.date),n.viewYear=n.selected.year,n.viewMonth=n.selected.month),n.datepicker.calendarHolder.monthsView.querySelectorAll(".dudp__month").forEach(function(e){var t=parseInt(e.dataset.month),a=n.config.range?n.dateFrom?n.dateFrom.getMonth():null:n.selected.month;e.classList[t===a?"add":"remove"]("selected")})}},{key:"_setSelection",value:function(){var e=this.datepicker,t=this.config.range?new Date:w.jsonToDate(this.selected);e.header.selectedYear.innerText=t.getFullYear(),e.header.selectedDate.innerText=w.formatDate.call(this,t,"D, mmm d")}},{key:"setValue",value:function(e){if(void 0===e)throw new Error("Expecting a value.");var t=this,a="string"==typeof e&&""===e,n=null;if(t.config.range){var r=a?[]:e.split(t.config.rangeDelim);if(""!==e&&r.length<2)throw new Error("Invalid date range value.");var i=new Date,o=a?null:w.parseDate.call(t,r[0]).date,s=a?null:w.parseDate.call(t,r[1]).date,l=a?"":w.formatDate.call(t,o,t.config.format),d=a?"":w.formatDate.call(t,o,t.config.outFormat||t.config.format),c=a?"":w.formatDate.call(t,s,t.config.format),_=a?"":w.formatDate.call(t,s,t.config.outFormat||t.config.format),r=a?"":t.config.events&&t.config.events.onRangeFormat?t.formatRange(o,s):r[0]===r[1]?r[0]:e;t.dateFrom=o,t.dateTo=s,t.viewYear=(o||i).getFullYear(),t.viewMonth=(o||i).getMonth(),t.input.value=r,w.setAttributes(t.input,{value:r,"data-range-from":d,"data-range-to":_}),t.fromEl&&(t.fromEl.value=l,w.setAttributes(t.fromEl,{value:l,"data-value":d})),t.toEl&&(t.toEl.value=c,w.setAttributes(t.toEl,{value:c,"data-value":_})),n={_dateFrom:o,dateFrom:a?null:l,_dateTo:s,dateTo:a?null:c,value:r}}else{r="string"==typeof e?a?new Date:w.parseDate.call(t,e,t.config.format).date:e,e=a?"":w.formatDate.call(t,r,t.config.format);t.date=r,t.viewYear=r.getFullYear(),t.viewMonth=r.getMonth(),t.input.value=e,t.input.setAttribute("value",e),n={_date:a?null:t.date,date:a?null:w.formatDate.call(t,t.date,t.config.outFormat||t.config.format)}}w.triggerChange(t.input,n),t.config.events&&t.config.events.dateChanged&&t.config.events.dateChanged.call(t,n,t)}},{key:"formatDate",value:function(e,t){return w.formatDate.call(this,e,t)}},{key:"formatRange",value:function(e,t){return this.config.events.onRangeFormat.call(this,e,t,this)}},{key:"show",value:function(){var o=this;setTimeout(function(){var e,t,a,n,r,i;document.body.setAttribute("datepicker-display","on"),o._resetSelection(),o._setSelection(),o._setupCalendar(),o.datepicker.container.classList.add("dp__open"),o.config.inline&&(a=o.showInFromEl?o.fromEl:o.showInToEl?o.toEl:o.input,e=w.calcOffset(a),n=o.datepicker.wrapper.offsetHeight,r=o.datepicker.wrapper.offsetWidth,i=w.screenDim(),t=e.top+n<i.height,a=e.left+r<i.width,n={},r=window.scrollY,i=window.scrollX,n[t?"top":"bottom"]="".concat(t?e.top-r:e.bottom,"px"),n[a?"left":"right"]="".concat(a?e.left-i:e.right,"px"),o.datepicker.container.removeAttribute("style"),w.setStyles(o.datepicker.container,n)),o.datepicker.wrapper.focus(),o.visible=!0,o.input.blur(),o.config.events&&o.config.events.shown&&o.config.events.shown.call(o,o)},0)}},{key:"hide",value:function(){var e=this;e.datepicker.container.classList.add("dp__closing"),e.visible=!1,e.input.focus(),document.body.removeAttribute("datepicker-display"),setTimeout(function(){e._switchView("calendar"),e.datepicker.container.classList.remove("dp__closing","dp__open"),e.config.events&&e.config.events.hidden&&e.config.events.hidden.call(e,e)},200)}},{key:"destroy",value:function(){this._unbindInput(),this.config.root.removeChild(this.datepicker.container),delete this.input[s]}}])&&n(e.prototype,t),a&&n(e,a),d}();function m(){var a=arguments,n=a[0],r=n instanceof NodeList||Array.isArray(n),i=w.isElement(n),e="string"==typeof n?document.querySelectorAll(n):r?n:i?[n]:document.querySelectorAll(l),o="object"!==t(n)||r||i?a[1]&&"object"===t(a[1])?a[1]:{}:n;Array.from(e).forEach(function(e){var t=e[s];t||(e[s]=t=new d(e,o)),("string"==typeof n||r||i)&&a[1]&&"string"==typeof a[1]&&t[a[1]].apply(t,Array.prototype.slice.call(a).slice(2))})}return r=null,(a="default_configs")in(e=d)?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,Object.defineProperty(m,"i18n",{value:i}),m.defaults=function(e){d.default_configs=w.extend(p,e)},m});