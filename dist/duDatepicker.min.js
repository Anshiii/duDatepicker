!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).duDatepicker=t()}(this,function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(a="Object"===a&&e.constructor?e.constructor.name:a)||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?r(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var e,a,i,b={appendTo:function(e,t,a){Array.isArray(e)?e.forEach(function(e){0===a?t.insertBefore(e,t.childNodes[a]||null):t.appendChild(e)}):0===a?t.insertBefore(e,t.childNodes[a]||null):t.appendChild(e)},addEvent:function(e,t,a){function n(e,t,a){e.addEventListener(t,a,!1)}Array.isArray(e)?e.forEach(function(e){n(e,t,a)}):n(e,t,a)},removeEvent:function(e,t,a){function n(e,t,a){e.removeEventListener(t,a,!1)}Array.isArray(e)?e.forEach(function(e){n(e,t,a)}):n(e,t,a)},empty:function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},createElem:function(e,t,a,n){e=document.createElement(e);return void 0!==a&&(e[n?"innerHTML":"innerText"]=a),void 0!==t&&b.setAttributes(e,t),e},setAttributes:function(e,t){for(var a in t)e.setAttribute(a,t[a])},setStyles:function(e,t){for(var a in t)e.style[a]=t[a]},getDaysCount:function(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()},dateDiff:function(e,t){return Math.round((t-e)/864e5)},screenDim:function(){var e=document.documentElement;return{height:Math.max(e.offsetHeight,e.clientHeight),width:Math.max(e.offsetWidth,e.clientWidth)}},calcOffset:function(e){var t=document.documentElement||document.body,a=e.getBoundingClientRect(),n=a.top+t.scrollTop,r=a.left+t.scrollLeft,a=e.offsetHeight,t=e.offsetWidth,e=b.screenDim();return{top:n+a,left:r,right:e.width-(r+t),bottom:e.height-n}},extend:function(){var a={},n=!1,e=0,t=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(n=arguments[0],e++);for(;e<t;e++)!function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n&&"[object Object]"===Object.prototype.toString.call(e[t])?a[t]=b.extend(!0,a[t],e[t]):a[t]=e[t])}(arguments[e]);return a},formatDate:function(e,t){var a=new Date(e),n=a.getDate(),r=a.getMonth(),i=a.getFullYear(),o=this.config.i18n,s=r+1;return t.replace(/(yyyy|yy|mmmm|mmm|mm|m|DD|D|dd|d)/g,function(e){switch(e){case"d":return n;case"dd":return("00"+n).slice(-2);case"D":return o.shortDays[a.getDay()];case"DD":return o.days[a.getDay()];case"m":return s;case"mm":return("00"+s).slice(-2);case"mmm":return o.shortMonths[r];case"mmmm":return o.months[r];case"yy":return i.toString().substr(2,2);case"yyyy":return i}})},parseDate:function(t,e){var a,n,r=void 0===e?this.config.format:e,i=(r.match(/d/g)||[]).length,o=(r.match(/m/g)||[]).length,s=(r.match(/y/g)||[]).length,l=4===o,d=1===o,c=1===i,u=t.length,_=r.indexOf("m"),f=r.indexOf("d"),p=r.indexOf("y"),m="",g="",h="",e=-1;return""===t?{m:null,d:null,y:null,date:new Date("")}:(l?(e=this.config.i18n.months.findIndex(function(e){return 0<=t.indexOf(e)}),m=this.config.i18n.months[e],f=(r=r.replace("mmmm",m)).indexOf("d"),p=p<_?r.indexOf("y"):r.indexOf("y",r.indexOf(m)+m.length)):m=!c&&!d||c&&!d&&_<f?t.substr(_,o):(o=r.lastIndexOf("m"),a=r.substring(_-1,_),n=r.substring(o+1,o+2),o===r.length-1?t.substring(t.indexOf(a,_-1)+1,u):0===_?t.substring(0,t.indexOf(n,_)):t.substring(t.indexOf(a,_-1)+1,t.indexOf(n,_+1))),{m:m,d:g=!c&&!d||!c&&d&&f<_?t.substr(f,i):(i=r.lastIndexOf("d"),a=r.substring(f-1,f),n=r.substring(i+1,i+2),i===r.length-1?t.substring(t.indexOf(a,f-1)+1,u):0===f?t.substring(0,t.indexOf(n,f)):t.substring(t.indexOf(a,f-1)+1,t.indexOf(n,f+1))),y:h=!d&&!c||d&&c&&p<_&&p<f||!d&&c&&p<f||d&&!c&&p<_?t.substr(p,s):(a=r.substring(p-1,p),t.substr(t.indexOf(a,p-1)+1,s)),date:new Date(h,isNaN(parseInt(m))?e:m-1,g)})},triggerChange:function(e,t){e.dispatchEvent(new Event("change")),e.dispatchEvent(new Event("onchange")),e.dispatchEvent(new function(e){var t=document.createEvent("CustomEvent");return t.initCustomEvent("datechanged",!1,!1),t.data=e,t}(t))},daysOfWeekDOM:function(){for(var e=this.config,t=e.i18n,a=[],n=0,r=e.firstDay||t.firstDay;n<t.shorterDays.length;n++,r++)a.push(t.shorterDays[r%7]);return"<span>".concat(a.join("</span><span>"),"</span>")},jsonToDate:function(e){return new Date(e.year,e.month,e.date)},dateToJson:function(e){return e?{year:e.getFullYear(),month:e.getMonth(),date:e.getDate()}:null},isElement:function(e){return e instanceof Element}},_={btnOk:"OK",btnCancel:"CANCEL",btnClear:"CLEAR"},o=function e(t,a,n,r,i,o,s){u(this,e),this.months=t,this.shortMonths=a||this.months.map(function(e){return e.substr(0,3)}),this.days=n,this.shortDays=r||this.days.map(function(e){return e.substr(0,3)}),this.shorterDays=i||this.days.map(function(e){return e.substr(0,2)}),this.firstDay=o,this.dict=b.extend(_,s)},o={Locale:o,en:new o("January_February_March_April_May_June_July_August_September_October_November_December".split("_"),null,"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),null,null,7),ru:new o("январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_"),"янв._февр._мар._апр._мая_июня_июля_авг._сент._окт._нояб._дек.".split("_"),"воскресенье_понедельник_вторник_среда_четверг_пятница_суббота".split("_"),"вс_пн_вт_ср_чт_пт_сб".split("_"),"вс_пн_вт_ср_чт_пт_сб".split("_"),1,{btnCancel:"Отменить",btnClear:"Очистить"}),es:new o("enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),null,"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),"dom._lun._mar._mié._jue._vie._sáb.".split("_"),null,1,{btnCancel:"Cancelar",btnClear:"Vaciar"}),tr:new o("Ocak_Şubat_Mart_Nisan_Mayıs_Haziran_Temmuz_Ağustos_Eylül_Ekim_Kasım_Aralık".split("_"),null,"Pazar_Pazartesi_Salı_Çarşamba_Perşembe_Cuma_Cumartesi".split("_"),"Paz_Pts_Sal_Çar_Per_Cum_Cts".split("_"),"Pz_Pt_Sa_Ça_Pe_Cu_Ct".split("_"),1),fa:new o("ژانویه_فوریه_مارس_آوریل_مه_ژوئن_ژوئیه_اوت_سپتامبر_اکتبر_نوامبر_دسامبر".split("_"),"ژانویه_فوریه_مارس_آوریل_مه_ژوئن_ژوئیه_اوت_سپتامبر_اکتبر_نوامبر_دسامبر".split("_"),"یک‌شنبه_دوشنبه_سه‌شنبه_چهارشنبه_پنج‌شنبه_جمعه_شنبه".split("_"),"یک‌شنبه_دوشنبه_سه‌شنبه_چهارشنبه_پنج‌شنبه_جمعه_شنبه".split("_"),"ی_د_س_چ_پ_ج_ش".split("_"),1),fr:new o("janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),"dim._lun._mar._mer._jeu._ven._sam.".split("_"),"di_lu_ma_me_je_ve_sa".split("_"),1,{btnCancel:"Abandonner",btnClear:"Effacer"}),de:new o("Januar_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),"Jan._Feb._März_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),1,{btnCancel:"Stornieren",btnClear:"Löschen"}),ja:new o("一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),"日曜日_月曜日_火曜日_水曜日_木曜日_金曜日_土曜日".split("_"),"日曜_月曜_火曜_水曜_木曜_金曜_土曜".split("_"),"日_月_火_水_木_金_土".split("_"),7),pt:new o("janeiro_fevereiro_março_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),null,"Domingo_Segunda-feira_Terça-feira_Quarta-feira_Quinta-feira_Sexta-feira_Sábado".split("_"),"Dom_Seg_Ter_Qua_Qui_Sex_Sáb".split("_"),"Do_2ª_3ª_4ª_5ª_6ª_Sá".split("_"),1,{btnCancel:"Cancelar",btnClear:"Clarear"}),vi:new o("tháng 1_tháng 2_tháng 3_tháng 4_tháng 5_tháng 6_tháng 7_tháng 8_tháng 9_tháng 10_tháng 11_tháng 12".split("_"),"Thg 01_Thg 02_Thg 03_Thg 04_Thg 05_Thg 06_Thg 07_Thg 08_Thg 09_Thg 10_Thg 11_Thg 12".split("_"),"chủ nhật_thứ hai_thứ ba_thứ tư_thứ năm_thứ sáu_thứ bảy".split("_"),"CN_T2_T3_T4_T5_T6_T7".split("_"),"CN_T2_T3_T4_T5_T6_T7".split("_"),1),zh:new o("一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),"周日_周一_周二_周三_周四_周五_周六".split("_"),"日_一_二_三_四_五_六".split("_"),1)},f=[9,112,113,114,115,116,117,118,119,120,121,122,123],s="_duDatepicker",l=".duDatepicker-input",m={value:null,format:"mm/dd/yyyy",outFormat:null,theme:"blue",auto:!1,inline:!1,clearBtn:!1,cancelBtn:!1,overlayClose:!0,disabledDates:[],disabledDays:[],range:!1,rangeDelim:"-",fromTarget:null,toTarget:null,multiple:!1,events:{dateChanged:null,onRangeFormat:null,ready:null,shown:null,hidden:null},i18n:o.en,firstDay:null,root:"body"},d=function(){function c(e,t){u(this,c);var a=this,n=t.i18n;if("string"==typeof n&&(t.i18n=g.i18n[n]),this.config=b.extend(c.default_configs||m,t),this.config.multiple&&0<=this.config.format.indexOf(","))throw new Error("For multiple dates mode, comma (,) should not be used in the format configuration.");var r=this.config.root;"string"==typeof r?this.config.root=document.querySelector(r):b.isElement(r)||delete this.config.root,this.animating=!1,this.visible=!1,this.input=e,this.input.readOnly=!0,this.fromEl=document.querySelector(this.config.fromTarget),this.toEl=document.querySelector(this.config.toTarget),this.input.hidden=this.config.range&&(this.fromEl||this.toEl),this.viewMode="calendar",this.dict=b.extend(_,this.config.i18n.dict),this.datepicker={container:b.createElem("div",{class:"dcalendarpicker"}),wrapper:b.createElem("div",{class:"dudp__wrapper",tabindex:0}),header:{wrapper:b.createElem("section",{class:"dudp__calendar-header"}),selectedYear:b.createElem("span",{class:"dudp__sel-year"}),selectedDate:b.createElem("span",{class:"dcp_sel-date"})},calendarHolder:{wrapper:b.createElem("section",{class:"dudp__cal-container"}),btnPrev:b.createElem("span",{class:"dudp__btn-cal-prev",role:"button"},"&lsaquo;",!0),btnNext:b.createElem("span",{class:"dudp__btn-cal-next",role:"button"},"&rsaquo;",!0),calendarViews:{wrapper:b.createElem("div",{class:"dudp__calendar-views"}),calendars:[]},yearsView:b.createElem("div",{class:"dudp__years-view dp__hidden"}),monthsView:b.createElem("div",{class:"dudp__months-view dp__hidden"}),buttons:{wrapper:b.createElem("div",{class:"dudp__buttons"}),btnClear:b.createElem("span",{class:"dudp__button clear",role:"button"},a.dict.btnClear),btnCancel:b.createElem("span",{class:"dudp__button cancel",role:"button"},a.dict.btnCancel),btnOk:b.createElem("span",{class:"dudp__button ok",role:"button"},a.dict.btnOk)}}},!a.config.value||a.config.range||a.config.multiple||(a.input.value=a.config.value,a.input.setAttribute("value",a.config.value)),this.minDate=a.input.dataset.mindate||a.config.minDate,this.maxDate=a.input.dataset.maxdate||a.config.maxDate;var i,o=new Date;if(a.config.range){var s=a.input.value,n=s.split(a.config.rangeDelim);if(""!==s&&n.length<2)throw new Error("duDatePicker: Invalid date range value");t=""===s?null:b.parseDate.call(a,n[0]).date,r=""===s?null:b.parseDate.call(a,n[1]).date;this.dateFrom=t,this.dateTo=r,this.rangeFrom=null,this.rangeTo=null,this.viewMonth=(t||o).getMonth(),this.viewYear=(t||o).getFullYear(),s&&(e=a.config.events&&a.config.events.onRangeFormat?a.formatRange(t,r):s,n=b.formatDate.call(a,t,a.config.format),s=b.formatDate.call(a,t,a.config.outFormat||a.config.format),t=b.formatDate.call(a,r,a.config.format),r=b.formatDate.call(a,r,a.config.outFormat||a.config.format),a.input.value=e,b.setAttributes(a.input,{value:e,"data-range-from":s,"data-range-to":r}),a.fromEl&&(a.fromEl.value=n,b.setAttributes(a.fromEl,{value:n,"data-value":s})),a.toEl&&(a.toEl.value=t,b.setAttributes(a.toEl,{value:n,"data-value":r})))}else a.config.multiple?(i=[],a.input.value?a.input.value.split(",").forEach(function(e){i.push(b.parseDate.call(a,e).date)}):a.config.value&&(Array.isArray(a.config.value)?a.config.value:a.config.value.split(",")).forEach(function(e){i.push(b.parseDate.call(a,e).date)}),i=i.sort(function(e,t){return t<e?1:e<t?-1:0}),this.dates=p(i),this.selectedDates=p(i),b.setAttributes(a.input,{value:i.map(function(e){return b.formatDate.call(a,e,a.config.outFormat||a.config.format)}).join(",")})):(this.date=""===a.input.value?o:b.parseDate.call(a,a.input.value).date,this.selected=b.dateToJson(a.date),this.viewMonth=a.selected.month,this.viewYear=a.selected.year);function l(){a.showInFromEl=a.config.inline&&a.fromEl&&this===a.fromEl,a.showInToEl=a.config.inline&&a.toEl&&this===a.toEl,a.show()}function d(e){return 13===e.keyCode&&(a.showInFromEl=a.config.inline&&a.fromEl&&this===a.fromEl,a.showInToEl=a.config.inline&&a.toEl&&this===a.toEl,a.show()),!(f.indexOf(e.which)<0)}this._unbindInput=function(){a.input.readOnly=!1,a.input.removeEventListener("click",l),a.input.removeEventListener("keydown",d),a.fromEl&&(a.fromEl.readOnly=!1,a.fromEl.removeEventListener("click",l),a.fromEl.removeEventListener("keydown",d)),a.toEl&&(a.toEl.readOnly=!1,a.toEl.removeEventListener("click",l),a.toEl.removeEventListener("keydown",d))},b.addEvent(a.input,"click",l),b.addEvent(a.input,"keydown",d),a.fromEl&&(a.fromEl.readOnly=!0,b.addEvent(a.fromEl,"click",l),b.addEvent(a.fromEl,"keydown",d)),a.toEl&&(a.toEl.readOnly=!0,b.addEvent(a.toEl,"click",l),b.addEvent(a.toEl,"keydown",d)),this._init(),this._setSelection()}var e,t,a;return e=c,(t=[{key:"_init",value:function(){var a=this,e=a.datepicker,t=e.header,n=e.calendarHolder,r=n.buttons,i=a.selected||new Date;a.config.inline||(b.appendTo([t.selectedYear,t.selectedDate],t.wrapper),b.appendTo(t.wrapper,e.wrapper),b.addEvent(t.selectedYear,"click",function(){"years"!==a.viewMode&&a._switchView("years")}),b.addEvent(t.selectedDate,"click",function(){var e=new Date,t=a.config.range?e.getMonth():a.selected.month,e=a.config.range?e.getFullYear():a.selected.year;a.viewMonth===t&&a.viewYear===e&&"calendar"===a.viewMode||(a.viewMonth=t,a.viewYear=e,a._setupCalendar(),a._switchView("calendar"))}));for(var o=0,s=1;s<4;s++){for(var l=b.createElem("div",{class:"dudp__month-row"}),d=0;d<4;d++){var c=b.createElem("span",{class:"dudp__month"});o===i.month&&c.classList.add("selected"),c.innerText=a.config.i18n.shortMonths[o],c.dataset.month=o,b.appendTo(c,l),b.addEvent(c,"click",function(e){var t=this.dataset.month;a.viewMonth=t,a._setupCalendar(),a._switchView("calendar")}),o++}b.appendTo(l,n.monthsView)}b.appendTo(a._getYears(),n.yearsView),a.config.clearBtn&&b.appendTo(r.btnClear,r.wrapper),a.config.cancelBtn&&b.appendTo(r.btnCancel,r.wrapper),a.config.auto&&!a.config.range&&!a.config.multiple||b.appendTo(r.btnOk,r.wrapper),b.appendTo([n.btnPrev,n.btnNext,n.calendarViews.wrapper,n.monthsView,n.yearsView,r.wrapper],n.wrapper),b.appendTo(n.wrapper,e.wrapper),b.appendTo(e.wrapper,e.container),b.appendTo(e.container,a.config.root),a.config.inline&&e.container.setAttribute("inline",!0),e.wrapper.dataset.theme=a.input.dataset.theme||a.config.theme,b.addEvent(e.wrapper,"keydown",function(e){27===e.keyCode?a.hide():37===e.keyCode?a._move("prev"):39===e.keyCode&&a._move("next")}),a.config.inline&&b.addEvent(e.wrapper,"blur",function(){a.hide()}),b.addEvent(n.btnPrev,"click",function(){a._move("prev")}),b.addEvent(n.btnNext,"click",function(){a._move("next")}),b.addEvent(n.calendarViews.wrapper,"click",function(e){e.target.classList.contains("cal-year")?a._switchView("years"):e.target.classList.contains("cal-month")&&a._switchView("months")}),a.config.clearBtn&&b.addEvent(r.btnClear,"click",function(){a.setValue(""),a.hide()}),a.config.overlayClose&&(b.addEvent(e.container,"click",function(){a.hide()}),b.addEvent(e.wrapper,"click",function(e){e.stopPropagation()})),a.config.cancelBtn&&b.addEvent(r.btnCancel,"click",function(){a.hide()}),b.addEvent(r.btnOk,"click",function(){if(a.config.range){if(!a.rangeFrom||!a.rangeTo)return;var e=b.jsonToDate(a.rangeFrom),t=b.jsonToDate(a.rangeTo);if(a._dateDisabled(e)||a._dateDisabled(t))return;a.dateFrom=e,a.dateTo=t,a.setValue([b.formatDate.call(a,e,a.config.format),b.formatDate.call(a,t,a.config.format)].join(a.config.rangeDelim))}else if(a.config.multiple)a.dates=p(a.selectedDates),a.setValue(a.dates.map(function(e){return b.formatDate.call(a,e,a.config.format)}));else{t=b.jsonToDate(a.selected);if(a._dateDisabled(t))return;a.date=t,a.setValue(a.date)}a.hide()}),a.config.events&&a.config.events.ready&&a.config.events.ready.call(a,a)}},{key:"_inRange",value:function(e){if(!this.config.range)return!1;var t=this.rangeFrom?b.jsonToDate(this.rangeFrom):null,a=this.rangeTo?b.jsonToDate(this.rangeTo):null;return t&&t<e&&a&&e<a}},{key:"_dateDisabled",value:function(t){var a=this,e=null,n=null,r=new Date,i=new Date(r.getFullYear(),r.getMonth(),r.getDate()),o=a.config.disabledDates,r=a.config.disabledDays,o=0<o.filter(function(e){return 0<=e.indexOf("-")?t>=b.parseDate.call(a,e.split("-")[0]).date&&t<=b.parseDate.call(a,e.split("-")[1]).date:b.parseDate.call(a,e).date.getTime()===t.getTime()}).length,r=0<=r.indexOf(a.config.i18n.days[t.getDay()])||0<=r.indexOf(a.config.i18n.shortDays[t.getDay()])||0<=r.indexOf(a.config.i18n.shorterDays[t.getDay()]);return a.minDate&&(e="today"===a.minDate?i:new Date(a.minDate)),a.maxDate&&(n="today"===a.maxDate?i:new Date(a.maxDate)),e&&t<e||n&&n<t||o||r}},{key:"_getDates",value:function(r,i){for(var d=this,a=1,e=new Date,n=new Date(e.getFullYear(),e.getMonth(),e.getDate()),o=d.config.range||d.config.multiple?null:b.jsonToDate(d.selected),s=d.rangeFrom?b.jsonToDate(d.rangeFrom):null,l=d.rangeTo?b.jsonToDate(d.rangeTo):null,c=new Date(r,i,a),t=b.getDaysCount(c),u=1,_=[],f=d.config.firstDay||d.config.i18n.firstDay,p=(f+6)%7,m=function(e,t){d._dateDisabled(t)&&e.classList.add("disabled"),d._inRange(t)&&e.classList.add("in-range"),t.getTime()===n.getTime()&&e.classList.add("current"),(!d.config.range&&!d.config.multiple&&t.getTime()===o.getTime()||d.config.multiple&&d.dates.find(function(e){return e.getTime()===t.getTime()}))&&e.classList.add("selected"),d.config.range&&s&&t.getTime()===s.getTime()&&e.classList.add("range-from"),d.config.range&&l&&t.getTime()===l.getTime()&&e.classList.add("range-to")},g=1;g<=6;g++){for(var h=[],v=0,y=f;v<7;v++,y++)h.push(b.createElem("span",{class:"dudp__date","data-dow":y%7}));for(;a<=t;)if("break"===function(){c.setDate(a);var t=c.getDay(),e=h.find(function(e){return parseInt(e.dataset.dow)===t});return e.dataset.date=a,e.dataset.month=i,e.dataset.year=r,m(e,c),1===g&&t===f%7?"break":t===p?(e.innerText=a++,"break"):void(e.innerText=a++)}())break;(1===g||4<g)&&(1===g?function(){for(var t=new Date(r,i-1,1),e=b.getDaysCount(t),a=1;a<=7;a++){t.setDate(e--);var n=h.find(function(e){return parseInt(e.dataset.dow)===t.getDay()});""===n.innerText&&(n.dataset.date=t.getDate(),n.dataset.month=t.getMonth(),n.dataset.year=t.getFullYear(),n.innerText=t.getDate(),n.classList.add("dudp__pm"),m(n,t))}}():4<g&&function(){for(var t=new Date(r,i+1,1),e=1;e<=7;e++){t.setDate(u);var a=h.find(function(e){return parseInt(e.dataset.dow)===t.getDay()});""===a.innerText&&(u++,a.dataset.date=t.getDate(),a.dataset.month=t.getMonth(),a.dataset.year=t.getFullYear(),a.innerText=t.getDate(),a.classList.add("dudp__nm"),m(a,t))}}()),_.push(h)}var w=[];return _.forEach(function(e){for(var t=b.createElem("div",{class:"dudp__cal-week"}),a=0;a<e.length;a++){var n=e[a];b.addEvent(n,"click",function(){var e,t,a=this,i=a.dataset.year,o=a.dataset.month,s=a.dataset.date,n=new Date(i,o,s),l=!1;d._dateDisabled(n)||(d.config.range?(t=d.rangeFrom?b.jsonToDate(d.rangeFrom):null,e=d.rangeTo?b.jsonToDate(d.rangeTo):null,!d.rangeFrom||d.rangeFrom&&n<t||d.rangeFrom&&d.rangeTo&&b.dateDiff(t,n)<=b.dateDiff(n,e)&&0!==b.dateDiff(t,n)||d.rangeFrom&&d.rangeTo&&e.getTime()===n.getTime()?(d.rangeFrom={year:i,month:o,date:s},l=!0):(!d.rangeTo||d.rangeTo&&e<n||d.rangeFrom&&d.rangeTo&&b.dateDiff(n,e)<b.dateDiff(t,n)&&0!==b.dateDiff(n,e)||d.rangeFrom&&d.rangeTo&&t.getTime()===n.getTime())&&(d.rangeTo={year:i,month:o,date:s},l=!1),d.datepicker.calendarHolder.calendarViews.wrapper.querySelectorAll(".dudp__date").forEach(function(e){var t=e.dataset.year,a=e.dataset.month,n=e.dataset.date,r=d._inRange(new Date(t,a,n));e.classList[i===t&&o===a&&s===n?"add":"remove"](l?"range-from":"range-to"),e.classList[r?"add":"remove"]("in-range")})):d.config.multiple?(t=a.classList.contains("selected"),a.classList[t?"remove":"add"]("selected"),t?d.selectedDates=d.selectedDates.filter(function(e){return e.getTime()!==n.getTime()}):d.selectedDates.push(n),d._setSelection()):(d.datepicker.calendarHolder.calendarViews.wrapper.querySelectorAll(".dudp__date").forEach(function(e){var t=e.dataset.year,a=e.dataset.month,n=e.dataset.date;e.classList[i===t&&o===a&&s===n?"add":"remove"]("selected")}),d.selected={year:i,month:o,date:s},d._setSelection(),d.config.auto&&(d.date=n,d.setValue(d.date),d.hide())),d.datepicker.calendarHolder.wrapper.querySelectorAll(".dudp__month").forEach(function(e){var t=e.dataset.month;e.classList[t===o?"add":"remove"]("selected")}))}),b.appendTo(n,t)}w.push(t)}),w}},{key:"_getYears",value:function(){for(var t=this,e=t.viewYear-50,a=t.viewYear+25,n=[],r=e;r<=a;r++){var i=b.createElem("span",{class:"dudp__year"});r===t.viewYear&&i.classList.add("selected"),i.innerText=r,i.dataset.year=r,b.addEvent(i,"click",function(){var e=parseInt(this.dataset.year);t.viewYear=e,t.config.range||(t.selected.year=e),t._setSelection(),t._setupCalendar(),t._switchView("calendar")}),n.push(i)}return n}},{key:"_setupCalendar",value:function(){var e=this,t=e.datepicker.calendarHolder.calendarViews,a=+e.viewYear,n=+e.viewMonth;t.calendars.length=0;var r={wrapper:b.createElem("div",{class:"dudp__calendar"}),header:b.createElem("div",{class:"dudp__cal-month-year"}),weekDays:b.createElem("div",{class:"dudp__weekdays"},b.daysOfWeekDOM.call(e),!0),datesHolder:b.createElem("div",{class:"dudp__dates-holder"})},i={wrapper:b.createElem("div",{class:"dudp__calendar"}),header:b.createElem("div",{class:"dudp__cal-month-year"}),weekDays:b.createElem("div",{class:"dudp__weekdays"},b.daysOfWeekDOM.call(e),!0),datesHolder:b.createElem("div",{class:"dudp__dates-holder"})},o={wrapper:b.createElem("div",{class:"dudp__calendar"}),header:b.createElem("div",{class:"dudp__cal-month-year"}),weekDays:b.createElem("div",{class:"dudp__weekdays"},b.daysOfWeekDOM.call(e),!0),datesHolder:b.createElem("div",{class:"dudp__dates-holder"})},s=0==n?11:n-1,l=11==n?0:1+n,d=0==n?a-1:a,c=11==n?1+a:a;b.appendTo([b.createElem("span",{class:"cal-month"},e.config.i18n.months[s]),b.createElem("span",{class:"cal-year"},d)],i.header),b.appendTo(e._getDates(d,s),i.datesHolder),b.appendTo([i.header,i.weekDays,i.datesHolder],i.wrapper),t.calendars.push(i),b.appendTo([b.createElem("span",{class:"cal-month"},e.config.i18n.months[n]),b.createElem("span",{class:"cal-year"},a)],r.header),b.appendTo(e._getDates(a,n),r.datesHolder),b.appendTo([r.header,r.weekDays,r.datesHolder],r.wrapper),t.calendars.push(r),b.appendTo([b.createElem("span",{class:"cal-month"},e.config.i18n.months[l]),b.createElem("span",{class:"cal-year"},c)],o.header),b.appendTo(e._getDates(c,l),o.datesHolder),b.appendTo([o.header,o.weekDays,o.datesHolder],o.wrapper),t.calendars.push(o),b.empty(t.wrapper),b.appendTo([i.wrapper,r.wrapper,o.wrapper],t.wrapper)}},{key:"_switchView",value:function(e){if("calendar"===e||"months"===e||"years"===e){var t=this,a=t.datepicker,n=a.calendarHolder.monthsView,r=a.calendarHolder.yearsView,i=a.calendarHolder.calendarViews.wrapper,o=a.calendarHolder.buttons.wrapper,s=t.viewMode,l="dp__hidden";switch(t.viewMode=e,t.viewMode){case"calendar":var d=i.querySelector(".dudp__calendar:nth-child(2)");i.classList.add("dp__animate-out"),i.classList.remove(l),"calendar"!==s&&d.classList.add("dp__zooming","dp__animate-zoom"),a.calendarHolder.btnPrev.classList.remove(l),a.calendarHolder.btnNext.classList.remove(l),o.classList.remove(l),setTimeout(function(){i.classList.remove("dp__animate-out"),"calendar"!==s&&d.classList.remove("dp__animate-zoom")},10),n.classList.add("dp__animate-out"),r.classList.add(l),setTimeout(function(){"calendar"!==s&&d.classList.remove("dp__zooming"),n.classList.add(l),n.classList.remove("dp__animate-out")},250);break;case"months":a.calendarHolder.btnPrev.classList.add(l),a.calendarHolder.btnNext.classList.add(l),o.classList.add(l),i.classList.add("dp__animate-out"),n.classList.add("dp__animate-out"),n.classList.remove(l),setTimeout(function(){n.classList.remove("dp__animate-out")},10),setTimeout(function(){i.classList.add(l),i.classList.remove("dp__animate-out")},250);break;case"years":b.empty(r),b.appendTo(t._getYears(),r);var c=r.querySelector(".dudp__year.selected");r.scrollTop=c.offsetTop-120,a.calendarHolder.btnPrev.classList.add(l),a.calendarHolder.btnNext.classList.add(l),o.classList.add(l),n.classList.add("dp__animate-out"),i.classList.add("dp__animate-out"),r.classList.remove(l),setTimeout(function(){i.classList.add(l),i.classList.remove("dp__animate-out"),n.classList.add(l),n.classList.remove("dp__animate-out")},250)}}}},{key:"_move",value:function(e){var t,a,n,r,i,o,s;"next"!==e&&"prev"!==e||((t=this).animating||(a=t.datepicker.calendarHolder.calendarViews,((n="next"===e)?11<t.viewMonth+1:t.viewMonth-1<0)&&(t.viewYear+=n?1:-1),t.viewMonth=n?11<t.viewMonth+1?0:t.viewMonth+1:t.viewMonth-1<0?11:t.viewMonth-1,t.animating=!0,r="dp__animate-"+(n?"left":"right"),a.wrapper.querySelectorAll(".dudp__calendar").forEach(function(e){e.classList.add(r)}),i=t.viewYear,o=n?t.viewMonth+1:t.viewMonth-1,(n?11<o:o<0)&&(o=n?0:11,i+=n?1:-1),e=t._getDates(i,o),s={wrapper:b.createElem("div",{class:"dudp__calendar"}),header:b.createElem("div",{class:"dudp__cal-month-year"}),weekDays:b.createElem("div",{class:"dudp__weekdays"},b.daysOfWeekDOM.call(t),!0),datesHolder:b.createElem("div",{class:"dudp__dates-holder"})},b.appendTo([b.createElem("span",{class:"cal-month"},t.config.i18n.months[o]),b.createElem("span",{class:"cal-year"},i)],s.header),b.appendTo(e,s.datesHolder),b.appendTo([s.header,s.weekDays,s.datesHolder],s.wrapper),setTimeout(function(){b.appendTo(s.wrapper,a.wrapper,n?void 0:0),a.wrapper.querySelectorAll(".dudp__calendar").forEach(function(e){e.classList.remove(r)}),a.wrapper.removeChild(a.calendars[n?0:2].wrapper),a.calendars[n?"shift":"pop"](),a.calendars[n?"push":"unshift"](s),t.animating=!1},250)))}},{key:"_resetSelection",value:function(){var e,n=this;n.config.range?(e=n.dateFrom||new Date,n.rangeFrom=b.dateToJson(n.dateFrom),n.rangeTo=b.dateToJson(n.dateTo),n.viewYear=e.getFullYear(),n.viewMonth=e.getMonth()):n.config.multiple?(e=0<n.dates.length?n.dates.reduce(function(e,t){return e<t?e:t}):new Date,n.viewYear=e.getFullYear(),n.viewMonth=e.getMonth()):(n.selected=b.dateToJson(n.date),n.viewYear=n.selected.year,n.viewMonth=n.selected.month),n.datepicker.calendarHolder.monthsView.querySelectorAll(".dudp__month").forEach(function(e){var t=parseInt(e.dataset.month),a=n.config.range?n.dateFrom?n.dateFrom.getMonth():null:n.config.multiple?0<n.dates.length?n.dates.reduce(function(e,t){return e<t?e:t}):null:n.selected.month;e.classList[t===a?"add":"remove"]("selected")})}},{key:"_setSelection",value:function(){var e=this,t=e.datepicker,a=e.config.range?new Date:e.config.multiple?0<e.selectedDates.length?e.selectedDates.reduce(function(e,t){return e<t?e:t}):new Date:b.jsonToDate(e.selected);t.header.selectedYear.innerText=a.getFullYear(),t.header.selectedDate.innerText=b.formatDate.call(e,a,"D, mmm d")}},{key:"setValue",value:function(e){if(void 0===e)throw new Error("Expecting a value.");var t,a,n=this,r="string"==typeof e&&""===e,i=null;if(n.config.range){var o=r?[]:e.split(n.config.rangeDelim);if(""!==e&&o.length<2)throw new Error("Invalid date range value.");var s=new Date,l=r?null:b.parseDate.call(n,o[0]).date,d=r?null:b.parseDate.call(n,o[1]).date,c=r?"":b.formatDate.call(n,l,n.config.format),u=r?"":b.formatDate.call(n,l,n.config.outFormat||n.config.format),_=r?"":b.formatDate.call(n,d,n.config.format),f=r?"":b.formatDate.call(n,d,n.config.outFormat||n.config.format),o=r?"":n.config.events&&n.config.events.onRangeFormat?n.formatRange(l,d):o[0]===o[1]?o[0]:e;n.dateFrom=l,n.dateTo=d,n.viewYear=(l||s).getFullYear(),n.viewMonth=(l||s).getMonth(),n.input.value=o,b.setAttributes(n.input,{value:o,"data-range-from":u,"data-range-to":f}),n.fromEl&&(n.fromEl.value=c,b.setAttributes(n.fromEl,{value:c,"data-value":u})),n.toEl&&(n.toEl.value=_,b.setAttributes(n.toEl,{value:_,"data-value":f})),i={_dateFrom:l,dateFrom:r?null:c,_dateTo:d,dateTo:r?null:_,value:o}}else i=n.config.multiple?(t=[],(Array.isArray(e)?e:e.split(",")).forEach(function(e){t.push(b.parseDate.call(n,e).date)}),a=0<t.length?t.reduce(function(e,t){return e<t?e:t}):new Date,0<t.length&&(t=t.sort(function(e,t){return t<e?1:e<t?-1:0})),n.dates=p(t),n.viewYear=a.getFullYear(),n.viewMonth=a.getMonth(),b.setAttributes(n.input,{value:t.map(function(e){return b.formatDate.call(n,e,n.config.outFormat||n.config.format)}).join(",")}),{_dates:r?[]:n.dates,dates:r?[]:n.dates.map(function(e){return b.formatDate.call(n,e,n.config.outFormat||n.config.format)})}):(a="string"==typeof e?r?new Date:b.parseDate.call(n,e,n.config.format).date:e,e=r?"":b.formatDate.call(n,a,n.config.format),n.date=a,n.viewYear=a.getFullYear(),n.viewMonth=a.getMonth(),n.input.value=e,n.input.setAttribute("value",e),{_date:r?null:n.date,date:r?null:b.formatDate.call(n,n.date,n.config.outFormat||n.config.format)});b.triggerChange(n.input,i),n.config.events&&n.config.events.dateChanged&&n.config.events.dateChanged.call(n,i,n)}},{key:"formatDate",value:function(e,t){return b.formatDate.call(this,e,t)}},{key:"formatRange",value:function(e,t){return this.config.events.onRangeFormat.call(this,e,t,this)}},{key:"show",value:function(){var o=this;setTimeout(function(){var e,t,a,n,r,i;document.body.setAttribute("datepicker-display","on"),o._resetSelection(),o._setSelection(),o._setupCalendar(),o.datepicker.container.classList.add("dp__open"),o.config.inline&&(a=o.showInFromEl?o.fromEl:o.showInToEl?o.toEl:o.input,e=b.calcOffset(a),n=o.datepicker.wrapper.offsetHeight,r=o.datepicker.wrapper.offsetWidth,i=b.screenDim(),t=e.top+n<i.height,a=e.left+r<i.width,n={},r=window.scrollY,i=window.scrollX,n[t?"top":"bottom"]="".concat(t?e.top-r:e.bottom,"px"),n[a?"left":"right"]="".concat(a?e.left-i:e.right,"px"),o.datepicker.container.removeAttribute("style"),b.setStyles(o.datepicker.container,n)),o.datepicker.wrapper.focus(),o.visible=!0,o.input.blur(),o.config.events&&o.config.events.shown&&o.config.events.shown.call(o,o)},0)}},{key:"hide",value:function(){var e=this;e.datepicker.container.classList.add("dp__closing"),e.visible=!1,e.input.focus(),document.body.removeAttribute("datepicker-display"),setTimeout(function(){e._switchView("calendar"),e.datepicker.container.classList.remove("dp__closing","dp__open"),e.config.events&&e.config.events.hidden&&e.config.events.hidden.call(e,e)},200)}},{key:"destroy",value:function(){this._unbindInput(),this.config.root.removeChild(this.datepicker.container),delete this.input[s]}}])&&n(e.prototype,t),a&&n(e,a),c}();function g(){var a=arguments,n=a[0],r=n instanceof NodeList||Array.isArray(n),i=b.isElement(n),e="string"==typeof n?document.querySelectorAll(n):r?n:i?[n]:document.querySelectorAll(l),o="object"!==t(n)||r||i?a[1]&&"object"===t(a[1])?a[1]:{}:n;Array.from(e).forEach(function(e){var t=e[s];t||(e[s]=t=new d(e,o)),("string"==typeof n||r||i)&&a[1]&&"string"==typeof a[1]&&t[a[1]].apply(t,Array.prototype.slice.call(a).slice(2))})}return i=null,(a="default_configs")in(e=d)?Object.defineProperty(e,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[a]=i,Object.defineProperty(g,"i18n",{value:o}),g.defaults=function(e){d.default_configs=b.extend(m,e)},g});